# 🎯 AR舞蹈运镜引导模式

## 功能概述

AR舞蹈运镜引导是RECOMO v2.0全新推出的AI驱动型交互式拍摄引导功能，专为"拍同款"场景设计。用户可以跟随虚拟AR轨迹和音乐节拍，轻松模仿达人级运镜技巧。

## 核心特点

### 🎵 音乐节奏同步
- 实时BPM节拍可视化
- 16格节拍条动态展示
- 强拍/弱拍智能区分
- 音乐波形实时反馈

### 📍 3D轨迹引导
- 蓝色主轨迹透明渲染
- 7个关键运镜目标点
- 实时路径预览
- 下一目标点倒计时提示

### 🎯 智能反馈系统
- 轨迹偏差实时检测（0-100分）
- 颜色编码反馈（绿色=完美，黄色=调整，红色=偏差大）
- 语音+文字双重提示
- 节点到达音效奖励

### 📊 多维度评分
- **轨迹同步** - 运镜路径对齐度
- **节奏对拍** - 音乐卡点准确性  
- **镜头稳定** - 拍摄平滑度
- **综合得分** - 三项平均分

### 🏆 成就徽章系统
- 🎵 **音乐卡点王** - 节奏对拍 ≥90分
- 🎯 **轨迹同步大师** - 轨迹同步 ≥90分
- 📹 **稳定运镜专家** - 镜头稳定 ≥90分
- ⭐ **完美表演** - 综合得分 ≥95分

## 使用流程

### 1. 进入入口
- 从**发现页**选择"不齐舞团"相关模板
- 点击"拍同款"进入创作页
- 在序列控制界面，点击 **🎯 AR舞蹈运镜引导** 按钮

### 2. 准备阶段
- 查看音乐信息和BPM
- 观察3D轨迹路径预览
- 了解7个运镜关键点

### 3. 开始拍摄
- 点击播放按钮，倒计时3、2、1后开始
- 跟随白色目标球编号移动
- 注意底部实时引导文字
- 观察双轨迹对比（蓝色=目标，彩色=你的轨迹）

### 4. 实时反馈
- 顶部：音乐节拍条闪烁提示
- 中部：AR轨迹+目标点
- 底部：当前动作引导（如"3、2、1，左移推进！"）
- 右侧：三项得分实时更新

### 5. 完成结算
- 自动生成综合评分
- 展示各项详细得分
- 解锁获得的徽章
- 可选：分享到社区 / 重新挑战 / 完成退出

## 轨迹点说明

共7个关键运镜点，按时间顺序：

| 编号 | 名称 | 时间 | 动作说明 | 颜色 |
|------|------|------|----------|------|
| 1 | 起点 | 0s | 中心定位 | 蓝色 |
| 2 | 左移推进 | 4s | 向左平移+推进 | 蓝色 |
| 3 | 提升拉远 | 8s | 镜头上升+后退 | 黄色 |
| 4 | 快速绕至右侧 | 12s | 快速绕到右前方 | 红色 |
| 5 | 正面高位 | 16s | 正面高角度 | 蓝色 |
| 6 | 俯冲右前 | 20s | 低角度右前方 | 黄色 |
| 7 | 回中定格 | 24s | 回到中心稳定 | 绿色 |

## 技术实现

### 组件结构
```
ARDanceGuide.tsx (主组件)
├── MusicBeatBar (音乐节拍条)
├── ARTrajectoryOverlay (3D轨迹叠加)
├── RealtimeFeedback (实时反馈提示)
├── ScoreDisplay (得分显示)
└── 完成弹窗 (结算页面)
```

### 状态管理
- 播放/暂停控制
- 实时时间追踪（0.1秒精度）
- 当前节拍计算
- 目标点索引
- 用户偏差度（0-100）
- 三项得分累加

### 动画效果
- Motion/React驱动的流畅动画
- 节拍脉冲动画
- 目标点缩放动画
- 得分弹出动画
- 倒计时动画
- 完成页渐入动画

## 未来优化方向

### 短期优化
- [ ] 接入真实摄像头画面
- [ ] 集成陀螺仪/加速度计数据
- [ ] 真实音乐文件播放
- [ ] 语音播报功能
- [ ] 慢动作GIF生成

### 长期规划
- [ ] AI自动评分算法优化
- [ ] 多人PK挑战模式
- [ ] 自定义轨迹编辑器
- [ ] 社区排行榜集成
- [ ] AR滤镜特效叠加
- [ ] 真实3D场景扫描适配

## 注意事项

1. **设备要求**：需要支持陀螺仪和加速度计的设备
2. **网络要求**：首次加载需要良好网络下载资源
3. **权限要求**：需要摄像头和音频权限
4. **空间要求**：建议在2-3米宽敞空间内使用
5. **光线要求**：良好光线环境以保证图传质量

## 测试验证清单

- [x] AR界面UI渲染正常
- [x] 倒计时功能正常
- [x] 播放/暂停控制正常
- [x] 节拍条动画同步
- [x] 轨迹点渲染和高亮
- [x] 实时反馈文字更新
- [x] 得分累加逻辑正确
- [x] 完成页面数据展示
- [x] 徽章解锁逻辑
- [ ] 真实摄像头接入测试
- [ ] 陀螺仪数据接入测试
- [ ] 音乐同步测试
- [ ] 多设备适配测试
- [ ] 性能压力测试

## 联系与反馈

如有问题或建议，欢迎反馈至开发团队。
