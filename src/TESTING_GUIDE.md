# 🧪 AR舞蹈引导功能测试指南

## 快速测试路径

### 路径1：从发现页进入（推荐）

1. **打开应用** → 默认在"发现"页
2. **找到模板** → 第一个卡片"战无不胜 - 不齐舞团"
3. **点击卡片** → 进入模板详情页
4. **点击"拍同款"按钮** → 跳转到创作页（序列控制模式）
5. **点击"🎯 AR舞蹈运镜引导"按钮** → 启动AR引导模式
6. **验证UI展示**：
   - ✅ 顶部：音乐信息"Feel the Beat" + BPM 122
   - ✅ 节拍条：16格节拍可视化
   - ✅ 中部：3D轨迹线和7个目标点
   - ✅ 底部：播放按钮
   - ✅ 右上角：三项得分面板（初始0分）

### 路径2：直接在创作页测试

1. **打开应用** → 切换到"创作"标签
2. **等待加载** → 默认进入手动控制模式
3. **切换模式** → 点击顶部模式选择器，选择"序列控制"
4. **启动AR引导** → 点击"🎯 AR舞蹈运镜引导"按钮
5. **开始测试** → 同路径1第6步

## 功能测试清单

### 1. 启动流程 ✅

- [ ] 点击播放按钮后出现倒计时（3、2、1）
- [ ] 倒计时数字有缩放动画
- [ ] 倒计时结束后自动开始播放
- [ ] 顶部进度条开始移动

### 2. 音乐节拍系统 ✅

- [ ] 16格节拍条依次高亮（跟随currentBeat）
- [ ] 每4拍的第1拍颜色更亮（强拍）
- [ ] 当前节拍格有脉冲动画
- [ ] BPM显示为122

### 3. 轨迹引导系统 ✅

- [ ] 7个目标点全部渲染
- [ ] 当前目标点有缩放动画（白色边框）
- [ ] 下一个目标点显示箭头⬇️
- [ ] 蓝色主轨迹线连接所有点
- [ ] 用户轨迹（彩色虚线）随进度延伸
- [ ] 目标点标签显示（如"左移推进"）

### 4. 实时反馈 ✅

- [ ] 底部引导文字持续更新
- [ ] 反馈卡片颜色变化（绿/蓝/黄/红）
- [ ] 偏差指示器显示（完美对齐/保持节奏/调整方向）
- [ ] 文字内容符合当前进度（如"3、2、1，左移推进！"）

### 5. 得分系统 ✅

- [ ] 右上角三个得分面板正常显示
- [ ] 轨迹同步分数持续增加
- [ ] 节奏对拍分数每4拍增加
- [ ] 稳定性分数持续增加
- [ ] 到达节点时显示"+分数"动画

### 6. 控制按钮 ✅

- [ ] 播放/暂停按钮切换正常
- [ ] 暂停时所有动画停止
- [ ] 重做按钮重置所有状态
- [ ] 关闭按钮返回创作页

### 7. 完成结算 ✅

- [ ] 30秒后自动结束
- [ ] 弹出完成页面
- [ ] 显示综合得分（三项平均）
- [ ] 详细得分卡片展示（3项）
- [ ] 每项得分有进度条动画
- [ ] 得分≥90时显示对应徽章
- [ ] "分享到社区"按钮可点击
- [ ] "重新挑战"按钮重置并关闭弹窗
- [ ] "完成"按钮返回创作页

### 8. 徽章解锁逻辑 🏆

测试各种得分组合：

| 场景 | 轨迹 | 节奏 | 稳定 | 应显示徽章 |
|------|------|------|------|-----------|
| 场景A | 95 | 95 | 95 | 全部4个徽章 |
| 场景B | 90 | 85 | 88 | 仅"轨迹同步大师" |
| 场景C | 85 | 92 | 88 | 仅"音乐卡点王" |
| 场景D | 88 | 88 | 91 | 仅"稳定运镜专家" |
| 场景E | 80 | 82 | 85 | 无徽章 |

## 边界情况测试

### 暂停恢复测试
1. 播放5秒后暂停
2. 等待3秒
3. 继续播放
4. **预期**：时间继续，得分累加正常

### 重做功能测试
1. 播放10秒
2. 点击重做
3. **预期**：
   - 时间归零
   - 所有得分归零
   - 目标点回到第1个
   - 可以重新开始

### 快速切换测试
1. 播放 → 暂停 → 播放 → 暂停（快速点击）
2. **预期**：状态切换流畅，无卡顿

### 中途退出测试
1. 播放15秒
2. 点击关闭按钮
3. **预期**：
   - 返回创作页序列控制模式
   - AR引导模式完全卸载
4. 重新进入AR引导
5. **预期**：状态完全重置

## 性能检查

### 动画流畅度
- [ ] 60fps流畅度（无明显掉帧）
- [ ] 倒计时动画平滑
- [ ] 节拍条动画不卡顿
- [ ] 目标点缩放动画自然
- [ ] 得分数字弹出动画流畅

### 内存占用
- [ ] 长时间使用（5次以上完整流程）无内存泄漏
- [ ] 退出后内存释放正常

### 响应速度
- [ ] 按钮点击立即响应（<100ms）
- [ ] 状态更新及时（<50ms）
- [ ] 动画过渡自然（无闪烁）

## 视觉回归检查

### 布局检查
- [ ] 9:16竖屏比例正确
- [ ] 所有元素在安全区域内
- [ ] 底部按钮不被遮挡
- [ ] 顶部音乐信息完整显示
- [ ] 右侧得分面板不挡住主内容

### 颜色和品牌
- [ ] 品牌色#00A8E8使用正确
- [ ] 渐变效果符合设计系统
- [ ] 文字可读性良好（白色/半透明白色）
- [ ] Glassmorphism效果正确（backdrop-blur）

### 字体排版
- [ ] 标题使用正确字重
- [ ] 正文大小适中（caption/micro）
- [ ] 数字字体清晰可读
- [ ] 行高和间距合理

## 已知限制

当前版本为**模拟实现**，以下功能待后续集成：

❌ **尚未实现**：
- 真实摄像头画面（当前显示占位符）
- 陀螺仪/加速度计数据接入（用随机值模拟偏差）
- 真实音乐播放（仅计时器模拟节拍）
- 语音播报（仅文字提示）
- 慢动作GIF生成
- 社区分享功能（按钮可点击但无实际功能）

✅ **已完整实现**：
- 完整UI界面和交互流程
- 所有动画效果
- 得分计算逻辑
- 徽章解锁系统
- 倒计时和播放控制
- 轨迹可视化
- 实时反馈系统

## 测试通过标准

✅ **基础通过**（必须100%）：
- 能正常启动AR引导模式
- UI完整显示无错位
- 播放/暂停功能正常
- 能正常完成并看到结算页

✅ **完整通过**（建议90%+）：
- 所有功能测试清单项通过
- 性能检查无问题
- 视觉回归检查通过
- 边界情况测试正常

## 报告问题模板

发现问题时，请提供以下信息：

```
## 问题描述
[简要描述遇到的问题]

## 复现步骤
1. 
2. 
3. 

## 预期行为
[应该发生什么]

## 实际行为
[实际发生了什么]

## 截图/录屏
[如有可能，提供截图或录屏]

## 设备信息
- 浏览器：
- 设备：
- 屏幕尺寸：

## 严重程度
[ ] 阻塞性 - 功能完全无法使用
[ ] 严重 - 主要功能受影响
[ ] 一般 - 次要功能问题
[ ] 轻微 - UI/文案优化建议
```

---

**测试愉快！如有任何问题，请参考 `/AR_DANCE_GUIDE.md` 获取更多技术细节。**
